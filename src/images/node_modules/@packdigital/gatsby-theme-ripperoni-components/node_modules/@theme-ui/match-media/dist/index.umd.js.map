{"version":3,"file":"index.umd.js","sources":["../src/index.js"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react'\nimport { useThemeUI } from 'theme-ui'\n\n// Shared with @theme-ui/css\nconst defaultBreakpoints = [40, 52, 64].map(n => n + 'em')\n\nexport const useBreakpointIndex = (options = {}) => {\n  const context = useThemeUI()\n  const { defaultIndex = 0 } = options\n  const breakpoints =\n    (context.theme && context.theme.breakpoints) || defaultBreakpoints\n\n  const getIndex = useCallback(() => {\n    if (typeof window === 'undefined') {\n      if (typeof defaultIndex === 'number') {\n        if (defaultIndex < 0 || defaultIndex > breakpoints.length - 1) {\n          throw new RangeError(\n            `Default breakpoint index out of range. Theme has ${breakpoints.length} breakpoints, got index ${defaultIndex}`\n          )\n        }\n        return defaultIndex\n      }\n      throw new TypeError(\n        `Default breakpoint index should be a number. Got: ${defaultIndex}, ${typeof defaultIndex}`\n      )\n    }\n\n    return breakpoints.filter(\n      breakpoint =>\n        window.matchMedia(`screen and (min-width: ${breakpoint})`).matches\n    ).length\n  }, [breakpoints, defaultIndex])\n\n  const [value, setValue] = useState(getIndex)\n\n  useEffect(() => {\n    const onResize = () => {\n      const newValue = getIndex()\n      if (value !== newValue) {\n        setValue(newValue)\n      }\n    }\n    window.addEventListener('resize', onResize)\n    return () => window.removeEventListener('resize', onResize)\n  }, [breakpoints, getIndex, value])\n\n  return value\n}\n\nexport const useResponsiveValue = (values, options) => {\n  const { theme } = useThemeUI()\n  const array = typeof values === 'function' ? values(theme) : values\n  const index = useBreakpointIndex(options)\n  return array[index >= array.length ? array.length - 1 : index]\n}\n"],"names":["const","defaultBreakpoints","map","n","useBreakpointIndex","options","context","useThemeUI","breakpoints","theme","getIndex","useCallback","window","defaultIndex","length","RangeError","TypeError","filter","breakpoint","matchMedia","matches","useState","value","setValue","useEffect","onResize","newValue","addEventListener","removeEventListener","useResponsiveValue","values","array","index"],"mappings":";;;;;EAIAA,IAAMC,kBAAkB,GAAG,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAaC,GAAb,WAAiBC,YAAKA,CAAC,GAAG,OAA1B,CAA3B;AAEA,MAAaC,kBAAkB,aAAIC,OAAD;qCAAQ,GAAG;;QACrCC,OAAO,GAAGC,kBAAU,EAA1B;2FACuB;QACjBC,WAAW,GACdF,OAAO,CAACG,KAAR,IAAiBH,OAAO,CAACG,KAAR,CAAcD,WAAhC,IAAgDP,kBADlD;QAGMS,QAAQ,GAAGC,iBAAW;UACtB,OAAOC,MAAP,KAAkB,WAAtB,EAAmC;YAC7B,OAAOC,YAAP,KAAwB,QAA5B,EAAsC;cAChCA,YAAY,GAAG,CAAf,IAAoBA,YAAY,GAAGL,WAAW,CAACM,MAAZ,GAAqB,CAA5D,EAA+D;kBACvD,IAAIC,UAAJ,yDACgDP,WAAW,CAACM,OAAO,gCAA0BD,YAAa,EADhH;;;iBAIKA,YAAP;;;cAEI,IAAIG,SAAJ,yDACiDH,YAAa,WAAI,OAAOA,YAAa,GAD5F;;;aAKKL,WAAW,CAACS,MAAZ,WACLC,qBACEN,MAAM,CAACO,UAAP,8BAA4CD,UAAW,SAAIE,UAFxD,EAGLN,MAHF;KAf0B,EAmBzB,CAACN,WAAD,EAAcK,YAAd,CAnByB,CAA5B;cAqB0BQ,cAAQ,CAACX,QAAD;IAA3BY;IAAOC;IAEdC,eAAS;UACDC,QAAQ;YACNC,QAAQ,GAAGhB,QAAQ,EAAzB;;YACIY,KAAK,KAAKI,QAAd,EAAwB;UACtBH,QAAQ,CAACG,QAAD,CAAR;;OAHJ;;MAMAd,MAAM,CAACe,gBAAP,CAAwB,QAAxB,EAAkCF,QAAlC;kCACab,MAAM,CAACgB,mBAAP,CAA2B,QAA3B,EAAqCH,QAArC,IAAb;KARO,EASN,CAACjB,WAAD,EAAcE,QAAd,EAAwBY,KAAxB,CATM,CAAT;WAWOA,KAAP;GAxCK;AA2CP,MAAaO,kBAAkB,aAAIC,MAAD,EAASzB,OAAT;cACdE,kBAAU;IAApBE;QACFsB,KAAK,GAAG,OAAOD,MAAP,KAAkB,UAAlB,GAA+BA,MAAM,CAACrB,KAAD,CAArC,GAA+CqB,MAA7D;QACME,KAAK,GAAG5B,kBAAkB,CAACC,OAAD,CAAhC;WACO0B,KAAK,CAACC,KAAK,IAAID,KAAK,CAACjB,MAAf,GAAwBiB,KAAK,CAACjB,MAAN,GAAe,CAAvC,GAA2CkB,KAA5C,CAAZ;GAJK;;;;;;;;;"}