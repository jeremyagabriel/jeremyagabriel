"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports.onPostBuild = exports.onCreateBabelConfig = exports.onCreateWebpackConfig = void 0;

var _fs = require("fs");

var _webpackPlugin = _interopRequireDefault(require("@loadable/webpack-plugin"));

var _constants = require("./constants");

const onCreateWebpackConfig = ({
  actions,
  stage
}) => {
  if (stage === 'build-javascript') {
    actions.setWebpackConfig({
      plugins: [new _webpackPlugin.default({
        filename: _constants.statsFilename
      })]
    });
  }
};

exports.onCreateWebpackConfig = onCreateWebpackConfig;

const onCreateBabelConfig = ({
  actions
}) => {
  actions.setBabelPlugin({
    name: '@loadable/babel-plugin'
  });
};

exports.onCreateBabelConfig = onCreateBabelConfig;

const onPostBuild = () => {
  // Clean after ourselves
  (0, _fs.unlinkSync)(_constants.statsPath);
};

exports.onPostBuild = onPostBuild;