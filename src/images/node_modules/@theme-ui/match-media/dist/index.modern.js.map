{"version":3,"file":"index.modern.js","sources":["../src/index.ts"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { useThemeUI } from '@theme-ui/core'\nimport { Theme, defaultBreakpoints } from '@theme-ui/css'\n\ntype defaultOptions = {\n  defaultIndex?: number\n}\n\nexport const useBreakpointIndex = (options: defaultOptions = {}) => {\n  const context = useThemeUI()\n  const { defaultIndex = 0 } = options\n  const breakpoints =\n    (context.theme && context.theme.breakpoints) || defaultBreakpoints\n\n  if (typeof defaultIndex !== 'number') {\n    throw new TypeError(\n      `Default breakpoint index should be a number. Got: ${defaultIndex}, ${typeof defaultIndex}`\n    )\n  } else if (defaultIndex < 0 || defaultIndex > breakpoints.length - 1) {\n    throw new RangeError(\n      `Default breakpoint index out of range. Theme has ${breakpoints.length} breakpoints, got index ${defaultIndex}`\n    )\n  }\n\n  const [value, setValue] = useState(defaultIndex)\n  useEffect(() => {\n    const getIndex = () =>\n      breakpoints.filter(\n        (bp) => window.matchMedia(`screen and (min-width: ${bp})`).matches\n      ).length\n\n    const onResize = () => {\n      const newValue = getIndex()\n      if (value !== newValue) {\n        setValue(newValue)\n      }\n    }\n\n    onResize()\n    window.addEventListener('resize', onResize)\n    return () => window.removeEventListener('resize', onResize)\n  }, [breakpoints, value])\n\n  return value\n}\n\ntype Values<T> = ((theme: Theme | null) => T[]) | T[]\n\nexport function useResponsiveValue<T>(\n  values: Values<T>,\n  options: defaultOptions = {}\n): T {\n  const { theme } = useThemeUI()\n  const array = typeof values === 'function' ? values(theme) : values\n  const index = useBreakpointIndex(options)\n  return array[index >= array.length ? array.length - 1 : index]\n}\n"],"names":["useBreakpointIndex","options","context","useThemeUI","defaultIndex","breakpoints","theme","defaultBreakpoints","TypeError","length","RangeError","value","setValue","useState","useEffect","getIndex","filter","bp","window","matchMedia","matches","onResize","newValue","addEventListener","removeEventListener","useResponsiveValue","values","array","index"],"mappings":";;;;MAQaA,kBAAkB,GAAG,CAACC,UAA0B,EAA3B;AAChC,QAAMC,OAAO,GAAGC,UAAU,EAA1B;AACA,QAAM;AAAEC,IAAAA,YAAY,GAAG;AAAjB,MAAuBH,OAA7B;AACA,QAAMI,WAAW,GACdH,OAAO,CAACI,KAAR,IAAiBJ,OAAO,CAACI,KAAR,CAAcD,WAAhC,IAAgDE,kBADlD;;AAGA,MAAI,OAAOH,YAAP,KAAwB,QAA5B,EAAsC;AACpC,UAAM,IAAII,SAAJ,sDACiDJ,iBAAiB,OAAOA,cADzE,CAAN;AAGD,GAJD,MAIO,IAAIA,YAAY,GAAG,CAAf,IAAoBA,YAAY,GAAGC,WAAW,CAACI,MAAZ,GAAqB,CAA5D,EAA+D;AACpE,UAAM,IAAIC,UAAJ,qDACgDL,WAAW,CAACI,iCAAiCL,cAD7F,CAAN;AAGD;;AAED,QAAM,CAACO,KAAD,EAAQC,QAAR,IAAoBC,QAAQ,CAACT,YAAD,CAAlC;AACAU,EAAAA,SAAS,CAAC;AACR,UAAMC,QAAQ,GAAG,MACfV,WAAW,CAACW,MAAZ,CACGC,EAAD,IAAQC,MAAM,CAACC,UAAP,2BAA4CF,KAA5C,EAAmDG,OAD7D,EAEEX,MAHJ;;AAKA,UAAMY,QAAQ,GAAG;AACf,YAAMC,QAAQ,GAAGP,QAAQ,EAAzB;;AACA,UAAIJ,KAAK,KAAKW,QAAd,EAAwB;AACtBV,QAAAA,QAAQ,CAACU,QAAD,CAAR;AACD;AACF,KALD;;AAOAD,IAAAA,QAAQ;AACRH,IAAAA,MAAM,CAACK,gBAAP,CAAwB,QAAxB,EAAkCF,QAAlC;AACA,WAAO,MAAMH,MAAM,CAACM,mBAAP,CAA2B,QAA3B,EAAqCH,QAArC,CAAb;AACD,GAhBQ,EAgBN,CAAChB,WAAD,EAAcM,KAAd,CAhBM,CAAT;AAkBA,SAAOA,KAAP;AACD;SAIec,mBACdC,QACAzB,UAA0B;AAE1B,QAAM;AAAEK,IAAAA;AAAF,MAAYH,UAAU,EAA5B;AACA,QAAMwB,KAAK,GAAG,OAAOD,MAAP,KAAkB,UAAlB,GAA+BA,MAAM,CAACpB,KAAD,CAArC,GAA+CoB,MAA7D;AACA,QAAME,KAAK,GAAG5B,kBAAkB,CAACC,OAAD,CAAhC;AACA,SAAO0B,KAAK,CAACC,KAAK,IAAID,KAAK,CAAClB,MAAf,GAAwBkB,KAAK,CAAClB,MAAN,GAAe,CAAvC,GAA2CmB,KAA5C,CAAZ;AACD;;;;"}