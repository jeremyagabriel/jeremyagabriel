import chalk from 'chalk';
import get from 'lodash/get';
/**
 *
 * @export
 * @param {string} id
 * @returns {string}
 */
export function conditionallyIncludePlugin({ resolve, options = {}, theme = '', requiredOptions = [], previewable = true, enabled: isEnabled = true, }) {
    const isPreviewEnvironment = process.env.PREVIEW === 'true';
    const missingOptions = requiredOptions
        .map((requiredOption) => typeof requiredOption === 'string'
        ? [requiredOption, get(options, requiredOption)]
        : Object.entries(requiredOption)[0])
        .filter((requiredOption) => requiredOption[1] === undefined)
        .map((requiredOption) => requiredOption[0])
        .join(', ');
    if (isEnabled && !missingOptions && (!isPreviewEnvironment || previewable)) {
        return [{ options, resolve }];
    }
    const getTrueFalse = (value) => value ? chalk `{bold {green true}}` : chalk `{bold {red false}}`;
    console.warn(chalk `{bold {magenta ${resolve}}} not included:`);
    console.warn(chalk `  {bold •} theme: ${theme && chalk `{bold {cyan ${theme}}}`}`);
    console.warn(chalk `  {bold •} enabled: ${getTrueFalse(isEnabled)}`);
    console.warn(chalk `  {bold •} missing option(s): {bold ${missingOptions}}`);
    console.warn(chalk `  {bold •} can preview: ${getTrueFalse(previewable)}`);
    return [];
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZGl0aW9uYWxseS1pbmNsdWRlLXBsdWdpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvY29uZGl0aW9uYWxseS1pbmNsdWRlLXBsdWdpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEtBQUssTUFBTSxPQUFPLENBQUM7QUFDMUIsT0FBTyxHQUFHLE1BQU0sWUFBWSxDQUFDO0FBRTdCOzs7OztHQUtHO0FBQ0gsTUFBTSxVQUFVLDBCQUEwQixDQUFDLEVBQ3pDLE9BQU8sRUFDUCxPQUFPLEdBQUcsRUFBRSxFQUNaLEtBQUssR0FBRyxFQUFFLEVBQ1YsZUFBZSxHQUFHLEVBQUUsRUFDcEIsV0FBVyxHQUFHLElBQUksRUFDbEIsT0FBTyxFQUFFLFNBQVMsR0FBRyxJQUFJLEdBQ1c7SUFDcEMsTUFBTSxvQkFBb0IsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLE9BQU8sS0FBSyxNQUFNLENBQUM7SUFDNUQsTUFBTSxjQUFjLEdBQUcsZUFBZTtTQUNuQyxHQUFHLENBQUMsQ0FBQyxjQUFjLEVBQUUsRUFBRSxDQUN0QixPQUFPLGNBQWMsS0FBSyxRQUFRO1FBQ2hDLENBQUMsQ0FBQyxDQUFDLGNBQWMsRUFBRSxHQUFHLENBQUMsT0FBTyxFQUFFLGNBQWMsQ0FBQyxDQUFDO1FBQ2hELENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUN0QztTQUNBLE1BQU0sQ0FBQyxDQUFDLGNBQWMsRUFBRSxFQUFFLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxLQUFLLFNBQVMsQ0FBQztTQUMzRCxHQUFHLENBQUMsQ0FBQyxjQUFjLEVBQUUsRUFBRSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUMxQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFFZCxJQUFJLFNBQVMsSUFBSSxDQUFDLGNBQWMsSUFBSSxDQUFDLENBQUMsb0JBQW9CLElBQUksV0FBVyxDQUFDLEVBQUU7UUFDMUUsT0FBTyxDQUFDLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUM7S0FDL0I7SUFFRCxNQUFNLFlBQVksR0FBRyxDQUFDLEtBQWMsRUFBRSxFQUFFLENBQ3RDLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFBLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUEsb0JBQW9CLENBQUM7SUFFakUsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUEsa0JBQWtCLE9BQU8sa0JBQWtCLENBQUMsQ0FBQztJQUMvRCxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQSxxQkFBcUIsS0FBSyxJQUFJLEtBQUssQ0FBQSxlQUFlLEtBQUssSUFBSSxFQUFFLENBQUMsQ0FBQztJQUNqRixPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQSx1QkFBdUIsWUFBWSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNwRSxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQSx1Q0FBdUMsY0FBYyxHQUFHLENBQUMsQ0FBQztJQUM1RSxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQSwyQkFBMkIsWUFBWSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUUxRSxPQUFPLEVBQUUsQ0FBQztBQUNaLENBQUMifQ==